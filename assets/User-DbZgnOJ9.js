import{r as _}from"./request-GX0TqWNk.js";import{r as p,i as z,c as L,d as C,a as l,j as h,u as d,b as s,w as o,o as j,f}from"./index-CxCs3ydT.js";function A(){return _({url:"/customer"})}function F(r){return _({url:"/customer",method:"post",data:r})}function M(r,i){return _({url:`/customer/${r}`,method:"put",data:i})}function P(r){return _({url:`/customer/${r}`,method:"delete"})}function Q(r){return _({url:"/customer",method:"delete",data:r})}const G={class:"table-box"},H={class:"query-box"},J={class:"dialog-footer"},W={__name:"User",setup(r){let i=p(""),b=p([]),V=p([]),u=p(!1),a=p({}),v=p("add");const w=()=>{location.reload()},x=n=>{V.value=[],n.forEach(e=>{V.value.push(e.ID)})},D=()=>{u.value=!0,a.value={}},U=n=>{u.value=!0,v.value="edit",a.value={...n}},I=async n=>{await P(n.ID),w()},N=async()=>{await Q({ids:V.value}),w()},q=n=>{n.length>0?b.value=b.value.filter(e=>e.name.match(n)):w()},B=async()=>{if(u.value=!1,v.value==="add")await F(a.value);else if(v.value==="edit"){let n={name:a.value.name,state:a.value.state,address:a.value.address};await M(a.value.ID,n)}w()};return z(()=>{A().then(n=>{b.value=n.data.data})}),(n,e)=>{const y=s("el-input"),m=s("el-button"),c=s("el-table-column"),E=s("el-table"),g=s("el-form-item"),k=s("el-option"),R=s("el-select"),S=s("el-form"),T=s("el-dialog");return j(),L("div",G,[e[12]||(e[12]=C("div",{class:"title"},[C("h2",null,"CURD")],-1)),C("div",H,[l(y,{modelValue:d(i),"onUpdate:modelValue":e[0]||(e[0]=t=>h(i)?i.value=t:i=t),style:{width:"240px"},placeholder:"查询名称",onInput:q},null,8,["modelValue"]),l(m,{type:"primary",onClick:D},{default:o(()=>e[6]||(e[6]=[f("新增")])),_:1}),l(m,{type:"danger",onClick:N},{default:o(()=>e[7]||(e[7]=[f("删除多选")])),_:1})]),l(E,{border:"",data:d(b),style:{width:"100%"},ref:"multipleTableRef",onSelectionChange:x},{default:o(()=>[l(c,{type:"selection",selectable:n.selectable,width:"55"},null,8,["selectable"]),l(c,{prop:"name",label:"姓名",width:"120"}),l(c,{prop:"state",label:"状态",width:"120"}),l(c,{prop:"address",label:"地址",width:"600"}),l(c,{fixed:"right",label:"操作","min-width":"120"},{default:o(t=>[l(m,{link:"",type:"primary",size:"small",onClick:$=>U(t.row)},{default:o(()=>e[8]||(e[8]=[f("编辑")])),_:2},1032,["onClick"]),l(m,{link:"",type:"danger",size:"small",onClick:$=>I(t.row)},{default:o(()=>e[9]||(e[9]=[f("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(T,{modelValue:d(u),"onUpdate:modelValue":e[5]||(e[5]=t=>h(u)?u.value=t:u=t),width:"500",title:d(v)==="add"?"新增":"编辑"},{footer:o(()=>[C("div",J,[l(m,{onClick:e[4]||(e[4]=t=>h(u)?u.value=!1:u=!1)},{default:o(()=>e[10]||(e[10]=[f("取消")])),_:1}),l(m,{type:"primary",onClick:B},{default:o(()=>e[11]||(e[11]=[f("确认")])),_:1})])]),default:o(()=>[l(S,{model:d(a)},{default:o(()=>[l(g,{label:"姓名","label-width":100},{default:o(()=>[l(y,{modelValue:d(a).name,"onUpdate:modelValue":e[1]||(e[1]=t=>d(a).name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(g,{label:"状态","label-width":100},{default:o(()=>[l(R,{modelValue:d(a).state,"onUpdate:modelValue":e[2]||(e[2]=t=>d(a).state=t),placeholder:"状态"},{default:o(()=>[l(k,{label:"在职",value:"在职"}),l(k,{label:"离职",value:"离职"})]),_:1},8,["modelValue"])]),_:1}),l(g,{label:"地址","label-width":100},{default:o(()=>[l(y,{modelValue:d(a).address,"onUpdate:modelValue":e[3]||(e[3]=t=>d(a).address=t),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}};export{W as default};
